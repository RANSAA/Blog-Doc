import{_ as a,c as n,o as e,ag as p}from"./chunks/framework.Bee44SUS.js";const u=JSON.parse('{"title":"利用shell脚本实现监控程序自动重启","description":"","frontmatter":{},"headers":[],"relativePath":"src/Linux/利用shell脚本实现监控程序自动重启.md","filePath":"src/Linux/利用shell脚本实现监控程序自动重启.md","lastUpdated":1758099352000}'),t={name:"src/Linux/利用shell脚本实现监控程序自动重启.md"};function l(i,s,o,c,d,h){return e(),n("div",null,[...s[0]||(s[0]=[p(`<h1 id="利用shell脚本实现监控程序自动重启" tabindex="-1">利用shell脚本实现监控程序自动重启 <a class="header-anchor" href="#利用shell脚本实现监控程序自动重启" aria-label="Permalink to &quot;利用shell脚本实现监控程序自动重启&quot;">​</a></h1><p>脚本如下：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>#!/bin/bash  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>while true  </span></span>
<span class="line"><span>do   </span></span>
<span class="line"><span>    procnum=\` ps -ef|grep &quot;Run&quot;|grep -v grep|wc -l \` </span></span>
<span class="line"><span>    if [[ $procnum -eq 1 ]]; then</span></span>
<span class="line"><span>         echo &quot;AutoReboot&quot;</span></span>
<span class="line"><span>        /Users/kimi/Desktop/AutoReboot/App/Run&amp;  </span></span>
<span class="line"><span>    fi</span></span>
<span class="line"><span>    sleep 30</span></span>
<span class="line"><span>done</span></span></code></pre></div><p>-eq意思是等于1，用于判断该Run是否还在运行状态。监控/Users/kimi/Desktop/AutoReboot/App/Run这个程序是否运行。</p><p>添加权限：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span> chmod 777 AutoReboot.sh</span></span></code></pre></div><p>启动脚本：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>./AutoReboot.sh&amp;</span></span></code></pre></div><p>记得加上&amp;，要不然得窗口退了，该脚本也退出了。</p><p><br> 设置开机自动启动脚本: 使用命令 vi /etc/rc.local 在文件末尾添加这一行</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>/home/AutoReboot.sh&amp;</span></span></code></pre></div>`,11)])])}const _=a(t,[["render",l]]);export{u as __pageData,_ as default};
