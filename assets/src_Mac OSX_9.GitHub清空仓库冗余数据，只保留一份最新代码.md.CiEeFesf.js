import{_ as s,c as n,o as t,ag as i}from"./chunks/framework.Bee44SUS.js";const g=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"src/Mac OSX/9.GitHub清空仓库冗余数据，只保留一份最新代码.md","filePath":"src/Mac OSX/9.GitHub清空仓库冗余数据，只保留一份最新代码.md","lastUpdated":1770199621000}'),p={name:"src/Mac OSX/9.GitHub清空仓库冗余数据，只保留一份最新代码.md"};function e(l,a,o,c,d,r){return t(),n("div",null,[...a[0]||(a[0]=[i(`<h2 id="github清空仓库冗余数据-只保留一份最新代码" tabindex="-1">GitHub清空仓库冗余数据，只保留一份最新代码 <a class="header-anchor" href="#github清空仓库冗余数据-只保留一份最新代码" aria-label="Permalink to &quot;GitHub清空仓库冗余数据，只保留一份最新代码&quot;">​</a></h2><h2 id="简介" tabindex="-1">简介 <a class="header-anchor" href="#简介" aria-label="Permalink to &quot;简介&quot;">​</a></h2><p>有时候仓库提交次数太多，造成仓库的体积剧增，但是这些提交又不重要，只需要最新的提交。<br> 那么这时候就需要重置清空仓库，然后只保留一份最新代码即可。</p><h2 id="清空github仓库并保留最新代码的步骤如下" tabindex="-1">清空GitHub仓库并保留最新代码的步骤如下： <a class="header-anchor" href="#清空github仓库并保留最新代码的步骤如下" aria-label="Permalink to &quot;清空GitHub仓库并保留最新代码的步骤如下：&quot;">​</a></h2><h2 id="操作前提醒" tabindex="-1">操作前提醒 <a class="header-anchor" href="#操作前提醒" aria-label="Permalink to &quot;操作前提醒&quot;">​</a></h2><ul><li><strong>备份重要文件和记录</strong>：清空操作将不可恢复。</li><li><strong>确认权限</strong>：需要具有该仓库的管理员权限。</li></ul><h2 id="具体步骤" tabindex="-1">具体步骤 <a class="header-anchor" href="#具体步骤" aria-label="Permalink to &quot;具体步骤&quot;">​</a></h2><ol><li>克隆仓库到本地</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git clone &lt;仓库地址&gt;</span></span>
<span class="line"><span>cd &lt;仓库名&gt;</span></span></code></pre></div><ol start="2"><li>删除所有历史提交记录</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>rm -rf .git</span></span></code></pre></div><ol start="3"><li>重新初始化 Git 仓库</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git init</span></span></code></pre></div><ol start="4"><li>添加最新代码,将当前目录下的所有文件添加到新仓库：</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git add .</span></span></code></pre></div><ol start="5"><li>提交新的初始记录，创建一个新的提交：</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git commit -m &quot;Initial commit with the latest code&quot;</span></span></code></pre></div><ol start="6"><li>强制推送到远程仓库,将本地仓库的最新代码强制覆盖远程仓库内容：</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git remote add origin &lt;远程仓库地址&gt;</span></span>
<span class="line"><span>git branch -M main  # 确保分支名与远程一致（如默认是 main 或 master）</span></span>
<span class="line"><span>git push -f origin main</span></span></code></pre></div><p><br><strong>结果</strong></p><ul><li>远程仓库将只保留最新代码，所有提交记录将被清空。</li><li>仓库历史记录无法恢复。</li></ul><h2 id="示例-清空一个已经存在的本地仓库" tabindex="-1">示例：清空一个已经存在的本地仓库 <a class="header-anchor" href="#示例-清空一个已经存在的本地仓库" aria-label="Permalink to &quot;示例：清空一个已经存在的本地仓库&quot;">​</a></h2><p>已经存在的仓库AutoTask，它的主分支名为master，github仓库地址如下：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git@github-ctsfork:ctsfork/AutoTask.git</span></span></code></pre></div><p>现在清除所有提交记录，只保留一份最新的代码的具体操作如下：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>## 拉取最新代码</span></span>
<span class="line"><span>git pull</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>## 删除.git前，先备份.git/config文件</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>## 删除.git目录</span></span>
<span class="line"><span>rm -rf .git</span></span>
<span class="line"><span>git init</span></span>
<span class="line"><span>git add .</span></span>
<span class="line"><span>git commit -m &quot;Initial commit with the latest code&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>git remote add origin git@github-ctsfork:ctsfork/AutoTask.git</span></span>
<span class="line"><span>git branch -M master</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>## push前，需要保证与之前备份的.git/config中的[branch &quot;main&quot;]区域，以提供默认分支，不需要</span></span>
<span class="line"><span>## 使git push时使用默认的分支，而不需要每次都指定分支</span></span>
<span class="line"><span>git push</span></span>
<span class="line"><span>## 或者指定推送分支</span></span>
<span class="line"><span>git push -f origin master</span></span></code></pre></div>`,26)])])}const u=s(p,[["render",e]]);export{g as __pageData,u as default};
